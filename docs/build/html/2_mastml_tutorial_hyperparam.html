
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Hyperparameter optimization &#8212; MAterials Simulation Toolkit for Machine Learning (MAST-ML) 2.0 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Random leave-out versus leave-out-group cross-validation" href="2_mastml_tutorial_logcv.html" />
    <link rel="prev" title="Feature selection and learning curves" href="2_mastml_tutorial_featureselect.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="2_mastml_tutorial_logcv.html" title="Random leave-out versus leave-out-group cross-validation"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="2_mastml_tutorial_featureselect.html" title="Feature selection and learning curves"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">MAterials Simulation Toolkit for Machine Learning (MAST-ML) 2.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="2_mastml_tutorial.html" accesskey="U">MAST-ML tutorial</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="hyperparameter-optimization">
<h1>Hyperparameter optimization<a class="headerlink" href="#hyperparameter-optimization" title="Permalink to this headline">¶</a></h1>
<p>Next, we will consider optimization of the model hyperparameters, in order to use a better optimized model with a
selected feature set to minimize the model errors. To do this, we need to add the HyperOpt section to our input file,
as shown below. Here, we are optimzing our KernelRidge model, specifically its root_mean_squared_error, by using our
RepeatedKFold random leave-out cross-validation scheme. The param_names field provides the parameter names to optimize.
Here, we are optimizing the KernelRidge alpha and gamma parameters. Parameters must be delineated with a semicolon. The
param_values field provides a bound on the values to search over. Here, the minimum value is -5, max is 5, 100 points are
analyzed, and the numerical scaling is logarithmic, meaning it ranges from 10^-5 to 10^5. If “lin” instead of “log” would
have been specified, the scale would be linear with 100 values ranging from -5 to 5.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">HyperOpt</span><span class="p">]</span>
    <span class="p">[[</span><span class="n">GridSearch</span><span class="p">]]</span>
        <span class="n">estimator</span> <span class="o">=</span> <span class="n">KernelRidge</span>
        <span class="n">cv</span> <span class="o">=</span> <span class="n">RepeatedKFold</span>
        <span class="n">param_names</span> <span class="o">=</span> <span class="n">alpha</span> <span class="p">;</span> <span class="n">gamma</span>
        <span class="n">param_values</span> <span class="o">=</span> <span class="o">-</span><span class="mi">5</span> <span class="mi">5</span> <span class="mi">100</span> <span class="n">log</span> <span class="nb">float</span> <span class="p">;</span> <span class="o">-</span><span class="mi">5</span> <span class="mi">5</span> <span class="mi">100</span> <span class="n">log</span> <span class="nb">float</span>
        <span class="n">scoring</span> <span class="o">=</span> <span class="n">root_mean_squared_error</span>
</pre></div>
</div>
<p>Let’s take a final look at the same full fit and RepeatedKFold random cross-validation tests for this run:</p>
<p>Full-fit:</p>
<img alt="_images/MASTMLtutorial_run6_1.png" src="_images/MASTMLtutorial_run6_1.png" />
<p>Random leave out cross-validation:</p>
<img alt="_images/MASTMLtutorial_run6_2.png" src="_images/MASTMLtutorial_run6_2.png" />
<p>What we can see is, now that we down-selected features from more than 300 features in the previous run to just 20, along
with optimizing the hyperparameters of our KernelRidge model, our fits are once again improved. The hyperparameter
optimization portion of this workflow outputs the hyperparameter values and cross-validation scores for each step of,
in this case, the GridSearch that we performed. All of this information is saved in the KerenlRidge.csv file in the
GridSearch folder in the results directory tree. For this run, the optimal hyperparameters were alpha = 0.034 and gamma = 0.138</p>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="2_mastml_tutorial_logcv.html" title="Random leave-out versus leave-out-group cross-validation"
             >next</a> |</li>
        <li class="right" >
          <a href="2_mastml_tutorial_featureselect.html" title="Feature selection and learning curves"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">MAterials Simulation Toolkit for Machine Learning (MAST-ML) 2.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="2_mastml_tutorial.html" >MAST-ML tutorial</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, University of Wisconsin-Madison Computational Materials Group.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.4.4.
    </div>
  </body>
</html>