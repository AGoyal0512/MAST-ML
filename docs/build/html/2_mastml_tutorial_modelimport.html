
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Making predictions by importing a previously fit model &#8212; MAterials Simulation Toolkit for Machine Learning (MAST-ML) 2.0 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '2.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Predicting values for new, extrapolated data" href="2_mastml_tutorial_prediction.html" />
    <link rel="prev" title="Random leave-out versus leave-out-group cross-validation" href="2_mastml_tutorial_logcv.html" /> 
  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="2_mastml_tutorial_prediction.html" title="Predicting values for new, extrapolated data"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="2_mastml_tutorial_logcv.html" title="Random leave-out versus leave-out-group cross-validation"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">MAterials Simulation Toolkit for Machine Learning (MAST-ML) 2.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="2_mastml_tutorial.html" accesskey="U">MAST-ML tutorial</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="making-predictions-by-importing-a-previously-fit-model">
<h1>Making predictions by importing a previously fit model<a class="headerlink" href="#making-predictions-by-importing-a-previously-fit-model" title="Permalink to this headline">¶</a></h1>
<p>Here, we are going to import a previously fit model, and use it to predict the migration barriers for
those data points with Pt as the host element.</p>
<p>In your previous run, the LOG test split where the Pt host values were predicted is in the split_12 folder. The parity
plot for Pt test data should look like the below plot for your previous run:</p>
<img alt="_images/MASTMLtutorial_run8_1.png" src="_images/MASTMLtutorial_run8_1.png" />
<p>Here, we are going to import the model that was fitted to all the groups except Pt, and use MAST-ML’s data validation function
as detailed above to obtain this same plot, but with using Pt as the validation data and the imported, previously trained model.
If one were to extend this data set to include, for example, U as a host element, any number of previously trained models
could be used to predict the migration barrier values for U. To import this model, save the KernelRidge_split_12.pkl file
from your previous run into the /models/ folder (it is as the the same level as the /tests/ folder in your main MAST-ML
directory). To import this model into your next run, you can create a new field in the Models section, as shown below:</p>
<p>Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">Models</span><span class="p">]</span>
    <span class="c1">#[[KernelRidge]]</span>
    <span class="c1">#    kernel = rbf</span>
    <span class="c1">#    alpha = 0.034</span>
    <span class="c1">#    gamma = 0.138</span>
    <span class="c1">#[[KernelRidge_select]]</span>
    <span class="c1">#    kernel = rbf</span>
    <span class="c1">#    alpha = 1</span>
    <span class="c1">#    gamma = 1</span>
    <span class="c1">#[[KernelRidge_learn]]</span>
    <span class="c1">#    kernel = rbf</span>
    <span class="c1">#    alpha = 1</span>
    <span class="c1">#    gamma = 1</span>
    <span class="p">[[</span><span class="n">ModelImport</span><span class="p">]]</span>
        <span class="n">model_path</span> <span class="o">=</span> <span class="n">models</span><span class="o">/</span><span class="n">KernelRidge_split_12</span><span class="o">.</span><span class="n">pkl</span>
</pre></div>
</div>
<p>As we are only interested in assessing the fit on Pt for this example, we can change the DataSplits section to only have
the LOG test:</p>
<p>Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">DataSplits</span><span class="p">]</span>
    <span class="c1">#[[NoSplit]]</span>
    <span class="p">[[</span><span class="n">RepeatedKFold</span><span class="p">]]</span>
        <span class="n">n_splits</span> <span class="o">=</span> <span class="mi">5</span>
        <span class="n">n_repeats</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="c1">#[[RepeatedKFold_learn]]</span>
    <span class="c1">#    n_splits = 5</span>
    <span class="c1">#    n_repeats = 2</span>
    <span class="p">[[</span><span class="n">LeaveOneGroupOut</span><span class="p">]]</span>
        <span class="n">grouping_column</span> <span class="o">=</span> <span class="n">Host</span> <span class="n">element</span>
</pre></div>
</div>
<p>From running this model and inspecting the test data parity plot in split_12 (the folder for Pt group, we obtain this parity plot:</p>
<img alt="_images/MASTMLtutorial_run8_2.png" src="_images/MASTMLtutorial_run8_2.png" />
<p>As a comparison, this plot is exactly the same as the above plot from the previous run. This is the expected result, and
demonstrates that the previously fit model was successfully imported and used to predict the Pt values. By inspecting the
other groups, for example split_1, which is for Ag, the R squared and errors indicate a better fit than our previous run.
This better fit is expected, as the model we saved from the previous run contained Ag in the training data, so these predictions
on Ag should be improved (note that this is defeats the purpose of the LOG test, but shows that the trained model we imported
is behaving as expected).</p>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="2_mastml_tutorial_prediction.html" title="Predicting values for new, extrapolated data"
             >next</a> |</li>
        <li class="right" >
          <a href="2_mastml_tutorial_logcv.html" title="Random leave-out versus leave-out-group cross-validation"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">MAterials Simulation Toolkit for Machine Learning (MAST-ML) 2.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="2_mastml_tutorial.html" >MAST-ML tutorial</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, University of Wisconsin-Madison Computational Materials Group.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.3.
    </div>
  </body>
</html>