
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Predicting values for new, extrapolated data &#8212; MAterials Simulation Toolkit for Machine Learning (MAST-ML) 2.0 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '2.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="MAST-ML Code Documentation" href="3_code_documentation.html" />
    <link rel="prev" title="Making predictions by importing a previously fit model" href="2_mastml_tutorial_modelimport.html" /> 
  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="3_code_documentation.html" title="MAST-ML Code Documentation"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="2_mastml_tutorial_modelimport.html" title="Making predictions by importing a previously fit model"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">MAterials Simulation Toolkit for Machine Learning (MAST-ML) 2.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="2_mastml_tutorial.html" accesskey="U">MAST-ML tutorial</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="predicting-values-for-new-extrapolated-data">
<h1>Predicting values for new, extrapolated data<a class="headerlink" href="#predicting-values-for-new-extrapolated-data" title="Permalink to this headline">¶</a></h1>
<p>As a final example, we are going to use our model to predict the migration barriers for those data points with Pt as the
host element. Your data file already has a column with the title “predict_Pt”, with values equal to 0 in all rows except
where Pt is the host, in which case the value is 1. In the GeneralSetup section of your input file, add the parameter
validation_columns, and have it equal to “predict_Pt”, as shown below. This will make it so that the data with Pt as the
host element will never be involved in the model training. This feature is a convenient way to isolate part of your data,
or some new part of your data, to only function as a validation data set. This way, whenever a model is trained and tested
on the remaining data, an additional prediction will also be calculated, which here is for the Pt host data.</p>
<p>Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">GeneralSetup</span><span class="p">]</span>
    <span class="n">input_features</span> <span class="o">=</span> <span class="n">Auto</span>
    <span class="n">target_feature</span> <span class="o">=</span> <span class="n">Reduced</span> <span class="n">barrier</span> <span class="p">(</span><span class="n">eV</span><span class="p">)</span>
    <span class="n">randomizer</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">metrics</span> <span class="o">=</span> <span class="n">Auto</span>
    <span class="n">not_input_features</span> <span class="o">=</span> <span class="n">Host</span> <span class="n">element</span><span class="p">,</span> <span class="n">Solute</span> <span class="n">element</span><span class="p">,</span> <span class="n">predict_Pt</span>
    <span class="n">grouping_feature</span> <span class="o">=</span> <span class="n">Host</span> <span class="n">element</span>
    <span class="n">validation_columns</span> <span class="o">=</span> <span class="n">predict_Pt</span>
</pre></div>
</div>
<p>For this test, let’s run both the random cross-validation and LOG test. As a reminder, we need to un-comment the random
cross-validation test in the DataSplits section:</p>
<p>Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">DataSplits</span><span class="p">]</span>
    <span class="c1">#[[NoSplit]]</span>
    <span class="p">[[</span><span class="n">RepeatedKFold</span><span class="p">]]</span>
        <span class="n">n_splits</span> <span class="o">=</span> <span class="mi">5</span>
        <span class="n">n_repeats</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="c1">#[[RepeatedKFold_learn]]</span>
    <span class="c1">#    n_splits = 5</span>
    <span class="c1">#    n_repeats = 2</span>
    <span class="p">[[</span><span class="n">LeaveOneGroupOut</span><span class="p">]]</span>
        <span class="n">grouping_column</span> <span class="o">=</span> <span class="n">Host</span> <span class="n">element</span>
</pre></div>
</div>
<p>When running this test, you’ll notice there are fewer splits in the LOG test folder now. This is because Pt is only treated
as a final “validation” or “extrapolation” data set, and is never involved in the training or test set in any split. For
each split in the random and LOG CV tests, there is a “stats.txt” file which is written, which provides the average train, test
and prediction results. The prediction results are for the Pt validation data. Below are screenshots of the stats.txt file
for the random and LOG tests.</p>
<p>Random cross-validation:</p>
<img alt="_images/MASTMLtutorial_run9_1.png" src="_images/MASTMLtutorial_run9_1.png" />
<p>LOG cross-validation:</p>
<img alt="_images/MASTMLtutorial_run9_2.png" src="_images/MASTMLtutorial_run9_2.png" />
<p>For the random cross-validation, the R-squared and error values are higher for the predict_Pt dataset compared to the
average of the testing datasets. This is to be expected, as Pt is never involved in model training. Further, we can see
that the predictions for predict_Pt are slightly worse in the case of the LOG cross-validation test compared to the
random cross-validation test. This also makes sense, as each training split of the LOG test tends to result in worse
predictive performance (i.e. worse model training), relative to the random cross-validation case, as discussed in the
above test when we compared the results of the random and LOG cross-validation tests.</p>
<p>This concludes the MAST-ML tutorial document! There are some other features of MAST-ML which were not explicitly discussed
in this tutorial, such as forming data clusters. Consult the MAST-ML Input File section of this documentation for a more
in-depth overview of all the possible options for different MAST-ML runs.</p>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="3_code_documentation.html" title="MAST-ML Code Documentation"
             >next</a> |</li>
        <li class="right" >
          <a href="2_mastml_tutorial_modelimport.html" title="Making predictions by importing a previously fit model"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">MAterials Simulation Toolkit for Machine Learning (MAST-ML) 2.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="2_mastml_tutorial.html" >MAST-ML tutorial</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, University of Wisconsin-Madison Computational Materials Group.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.3.
    </div>
  </body>
</html>